import{_ as re}from"../chunks/preload-helper.41c905a7.js";import{S as Ee,i as we,s as Pe,k as L,q as Y,a as R,l as A,m as M,r as Q,h,c as X,n as p,b as P,G as z,u as me,H as J,I as le,o as Je,R as te,L as Ae,M as H,T as Re,N as De,j as Dt,U as St,e as W,J as Se,V as Me,W as Oe,w as Ie,K as qe,g as G,v as ae,d as F,f as ue,y as he,z as pe,A as ge,B as be,X as ke,Y as ye,Z as Ce,_ as Gt,O as Ft,p as Bt}from"../chunks/index.7c5e5199.js";import{b as ce,m as Ut,e as Wt,t as Ne,a as Ue,i as Ye,c as Rt}from"../chunks/setup.57078eda.js";import{b as Xt}from"../chunks/paths.b688b9f9.js";import{w as ve}from"../chunks/singletons.380e0e39.js";import{p as Ht}from"../chunks/stores.237e2ff9.js";const Jt=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/01_Lipp_cultural_collection_on_fashion_en.md":()=>re(()=>import("../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js"),["../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/01_Lipp_cultural_collections_on_fashion_de.md":()=>re(()=>import("../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js"),["../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_de.md":()=>re(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js"),["../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_en.md":()=>re(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js"),["../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_de.md":()=>re(()=>import("../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js"),["../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_en.md":()=>re(()=>import("../chunks/03_Fashion_costume_terminology_en.342c2110.js"),["../chunks/03_Fashion_costume_terminology_en.342c2110.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp-GNM_Werkgruppen_de.md":()=>re(()=>import("../chunks/04_Lipp-GNM_Werkgruppen_de.3054bb9d.js"),["../chunks/04_Lipp-GNM_Werkgruppen_de.3054bb9d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp_GNM_Werkgruppen_en.md":()=>re(()=>import("../chunks/04_Lipp_GNM_Werkgruppen_en.b17de690.js"),["../chunks/04_Lipp_GNM_Werkgruppen_en.b17de690.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_de.md":()=>re(()=>import("../chunks/05_family_portrait_de.84683c8f.js"),["../chunks/05_family_portrait_de.84683c8f.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_en.md":()=>re(()=>import("../chunks/05_family_portrait_en.c6d2d123.js"),["../chunks/05_family_portrait_en.c6d2d123.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_de.md":()=>re(()=>import("../chunks/06_earlymodern_images_de.3b541675.js"),["../chunks/06_earlymodern_images_de.3b541675.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_en.md":()=>re(()=>import("../chunks/06_earlymodern_images_en.6c6eb206.js"),["../chunks/06_earlymodern_images_en.6c6eb206.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/99_Chronology_of_LipperheideCostumeLibrary_de.md":()=>re(()=>import("../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js"),["../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>re(()=>import("../chunks/template.5d8b86f5.js"),["../chunks/template.5d8b86f5.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:r}=n.default.render(),o=t.slice(17,-3),a=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...r.matchAll(a)].map(f=>f[2]).filter(f=>!f.startsWith("http")).map(f=>{const u=f.lastIndexOf("/");return u!==-1?f.substring(u+1):f});return{meta:n.metadata,path:o,text:r,links:c}}))},Yt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),Qt=!0,Zt=async()=>(await Jt()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Kl=Object.freeze(Object.defineProperty({__proto__:null,entries:Zt,load:Yt,prerender:Qt},Symbol.toStringTag,{value:"Module"})),Xe=ve(""),Ge=ve(""),Te=ve(!1),Qe=ve([]),_e=ve([]),Ve=ve([]),ze=ve(0);function Ze(i){var s;let e,l=((s=i[0].meta)==null?void 0:s.description)+"",t;return{c(){e=L("div"),t=Y(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);t=Q(r,l),r.forEach(h),this.h()},h(){p(e,"class","description svelte-go6mrx")},m(n,r){P(n,e,r),z(e,t)},p(n,r){var o;r&1&&l!==(l=((o=n[0].meta)==null?void 0:o.description)+"")&&me(t,l)},d(n){n&&h(e)}}}function Ke(i){let e,l=i[0].meta.author+"",t;return{c(){e=L("div"),t=Y(l),this.h()},l(s){e=A(s,"DIV",{class:!0});var n=M(e);t=Q(n,l),n.forEach(h),this.h()},h(){p(e,"class","author svelte-go6mrx")},m(s,n){P(s,e,n),z(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&me(t,l)},d(s){s&&h(e)}}}function je(i){var n;let e,l,t=((n=new Date(i[0].meta.date))==null?void 0:n.toLocaleDateString(i[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",s;return{c(){e=L("div"),l=L("div"),s=Y(t),this.h()},l(r){e=A(r,"DIV",{class:!0});var o=M(e);l=A(o,"DIV",{class:!0});var a=M(l);s=Q(a,t),a.forEach(h),o.forEach(h),this.h()},h(){p(l,"class","date svelte-go6mrx"),p(e,"class","date svelte-go6mrx")},m(r,o){P(r,e,o),z(e,l),z(l,s)},p(r,o){var a;o&1&&t!==(t=((a=new Date(r[0].meta.date))==null?void 0:a.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&me(s,t)},d(r){r&&h(e)}}}function Kt(i){var O,S,C;let e,l,t,s,n=i[0].meta.title+"",r,o,a,c,f,u,d,_=((O=i[0].meta)==null?void 0:O.description)&&Ze(i),y=((S=i[0].meta)==null?void 0:S.author)&&Ke(i),T=((C=i[0].meta)==null?void 0:C.date)&&je(i);return{c(){e=L("a"),l=Y("← Index"),t=R(),s=L("h1"),r=Y(n),o=R(),_&&_.c(),a=R(),c=L("div"),y&&y.c(),f=R(),T&&T.c(),u=R(),d=L("div"),this.h()},l(m){e=A(m,"A",{href:!0,class:!0,rel:!0});var g=M(e);l=Q(g,"← Index"),g.forEach(h),t=X(m),s=A(m,"H1",{class:!0});var b=M(s);r=Q(b,n),b.forEach(h),o=X(m),_&&_.l(m),a=X(m),c=A(m,"DIV",{class:!0});var I=M(c);y&&y.l(I),f=X(I),T&&T.l(I),I.forEach(h),u=X(m),d=A(m,"DIV",{class:!0});var w=M(d);w.forEach(h),this.h()},h(){p(e,"href",Xt+"/"),p(e,"class","index svelte-go6mrx"),p(e,"rel","noopener noreferrer"),p(s,"class","svelte-go6mrx"),p(c,"class","metadata svelte-go6mrx"),p(d,"class","markdown svelte-go6mrx")},m(m,g){P(m,e,g),z(e,l),P(m,t,g),P(m,s,g),z(s,r),P(m,o,g),_&&_.m(m,g),P(m,a,g),P(m,c,g),y&&y.m(c,null),z(c,f),T&&T.m(c,null),P(m,u,g),P(m,d,g),d.innerHTML=i[1]},p(m,[g]){var b,I,w;g&1&&n!==(n=m[0].meta.title+"")&&me(r,n),(b=m[0].meta)!=null&&b.description?_?_.p(m,g):(_=Ze(m),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null),(I=m[0].meta)!=null&&I.author?y?y.p(m,g):(y=Ke(m),y.c(),y.m(c,f)):y&&(y.d(1),y=null),(w=m[0].meta)!=null&&w.date?T?T.p(m,g):(T=je(m),T.c(),T.m(c,null)):T&&(T.d(1),T=null)},i:J,o:J,d(m){m&&h(e),m&&h(t),m&&h(s),m&&h(o),_&&_.d(m),m&&h(a),m&&h(c),y&&y.d(),T&&T.d(),m&&h(u),m&&h(d)}}}const jt=/\[\^([^\]]+)\]/g;let $t=100;function xt(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function el(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function tl(i,e,l){const t=l-e;return(i-e)/t*100}function ll(i,e,l){const t=l-e;return e+t*i/100}function sl(i,e,l){let t,s;le(i,Te,m=>l(8,t=m)),le(i,Xe,m=>l(9,s=m));let{data:n}=e,{items:r}=e,{scrollTopVal:o}=e,a=n.text,c=1;const u=a.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(m,g,b)=>{if(g.startsWith("http"))return`<a class="external" target="_blank" href="${g}" title="${b}">${b}</a>`;{let I=g.split("/")[1];return`<a class="node-highlite" unique-id="${I}" id="${g.split("/")[1]}"
				data-id="${g.split("/")[1]}" title="${b}">${b}
				<span class="symbol node" unique-id="${I}" data-id="item_${g.split("/")[1]}"
				data-class="${r.filter(w=>w.label==b).map(w=>{var N,B;return(B=(N=w.data)==null?void 0:N["@type"])==null?void 0:B[1]})}">
					●
					</span></a>`}}).replace(jt,(m,g)=>{const b=c++;return`<sup id="fn-${b}"><a href="#fnref-${b}">${b}</a></sup><span id="fn-${b}-content">${g}</span>`}),d=Array.from({length:c-1},(m,g)=>{var w;const b=g+1,I=(w=u.match(new RegExp(`<span id="fn-${b}-content">([^<]+)</span>`)))==null?void 0:w[1];return`<li id="fnref-${b}"> ${I}</li>`}).join(""),_=`${u}
	<ol class="biblio">${d}</ol>`;let y;Je(async()=>{l(4,y=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),O(y),y.forEach(m=>{m.addEventListener("mouseenter",xt),m.addEventListener("mouseleave",el),m.addEventListener("click",T)})});function T(m){y.forEach(I=>{const w=I.getAttribute("data-id"),N=document.querySelector(`.node[data-id="${w}"]`);N&&N.classList.remove("clicked"),I.classList.remove("clicked")});const g=m.currentTarget.getAttribute("data-id"),b=document.querySelector(`.node[data-id="${g}"]`);b&&b.classList.toggle("clicked"),m.currentTarget.classList.toggle("clicked"),te(Xe,s=g,s)}function O(m){let g=null;l(4,y=Array.from(m).map(b=>{let I=b.offsetTop;return g!==null&&I<=g?b.adjustedOffsetTop=g+$t:b.adjustedOffsetTop=I,g=b.adjustedOffsetTop,b}))}let S=0;function C(m,g){var b,I,w,N,B,v;if(!t){let k=(b=m==null?void 0:m[S])==null?void 0:b.adjustedOffsetTop,U=(I=m==null?void 0:m[S+1])==null?void 0:I.adjustedOffsetTop,Z=(w=m==null?void 0:m[S])==null?void 0:w.getAttribute("data-id"),se=(N=m==null?void 0:m[S+1])==null?void 0:N.getAttribute("data-id"),q=(B=document.querySelector(`.node[data-id="${Z}"]`))==null?void 0:B.offsetTop,$=(v=document.querySelector(`.node[data-id="${se}"]`))==null?void 0:v.offsetTop,K=tl(g,k,U),D=ll(K,q,$);g>U&&S++,g<k&&S!=0&&S--;const E=document.querySelector(".links:first-of-type");k&&U&&E&&K&&D&&(E==null||E.scrollTo({top:D}))}}return i.$$set=m=>{"data"in m&&l(0,n=m.data),"items"in m&&l(2,r=m.items),"scrollTopVal"in m&&l(3,o=m.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&C(y,o)},[n,_,r,o,y]}class il extends Ee{constructor(e){super(),we(this,e,sl,Kt,Pe,{data:0,items:2,scrollTopVal:3})}}function $e(i,e,l){const t=i.slice();return t[27]=e[l],t}function nl(i){let e,l=(i[0].title||"")+"",t;return{c(){e=L("div"),t=Y(l),this.h()},l(s){e=A(s,"DIV",{class:!0});var n=M(e);t=Q(n,l),n.forEach(h),this.h()},h(){p(e,"class","title svelte-x5b8hf")},m(s,n){P(s,e,n),z(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&me(t,l)},d(s){s&&h(e)}}}function rl(i){let e,l,t,s,n,r=(i[0].title||"")+"",o,a,c;return{c(){e=L("img"),s=R(),n=L("div"),o=Y(r),this.h()},l(f){e=A(f,"IMG",{src:!0,alt:!0,class:!0}),s=X(f),n=A(f,"DIV",{class:!0});var u=M(n);o=Q(u,r),u.forEach(h),this.h()},h(){qe(e.src,l=i[5])||p(e,"src",l),p(e,"alt",t=i[0].title),p(e,"class","svelte-x5b8hf"),p(n,"class","title svelte-x5b8hf")},m(f,u){P(f,e,u),P(f,s,u),P(f,n,u),z(n,o),a||(c=H(e,"load",i[11]),a=!0)},p(f,u){u&32&&!qe(e.src,l=f[5])&&p(e,"src",l),u&1&&t!==(t=f[0].title)&&p(e,"alt",t),u&1&&r!==(r=(f[0].title||"")+"")&&me(o,r)},d(f){f&&h(e),f&&h(s),f&&h(n),a=!1,c()}}}function ol(i){let e,l,t,s,n,r=i[0].title+"",o,a,c;return{c(){e=L("img"),s=R(),n=L("div"),o=Y(r),this.h()},l(f){e=A(f,"IMG",{src:!0,alt:!0,class:!0}),s=X(f),n=A(f,"DIV",{class:!0});var u=M(n);o=Q(u,r),u.forEach(h),this.h()},h(){qe(e.src,l=i[0].img.replace("square","large"))||p(e,"src",l),p(e,"alt",t=i[0].title),p(e,"class","svelte-x5b8hf"),p(n,"class","title svelte-x5b8hf")},m(f,u){P(f,e,u),P(f,s,u),P(f,n,u),z(n,o),a||(c=H(e,"load",i[11]),a=!0)},p(f,u){u&1&&!qe(e.src,l=f[0].img.replace("square","large"))&&p(e,"src",l),u&1&&t!==(t=f[0].title)&&p(e,"alt",t),u&1&&r!==(r=f[0].title+"")&&me(o,r)},d(f){f&&h(e),f&&h(s),f&&h(n),a=!1,c()}}}function xe(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=et($e(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let r;for(r=0;r<l.length;r+=1){const o=$e(s,l,r);t[r]?t[r].p(o,n):(t[r]=et(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){Se(t,s),s&&h(e)}}}function et(i){let e,l,t,s=i[27].title+"",n,r;return{c(){e=L("a"),l=Y("→"),t=L("em"),n=Y(s),this.h()},l(o){e=A(o,"A",{class:!0,href:!0,target:!0,rel:!0});var a=M(e);l=Q(a,"→"),t=A(a,"EM",{});var c=M(t);n=Q(c,s),c.forEach(h),a.forEach(h),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",r=i[27].url),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(o,a){P(o,e,a),z(e,l),z(e,t),z(t,n)},p(o,a){a&256&&s!==(s=o[27].title+"")&&me(n,s),a&256&&r!==(r=o[27].url)&&p(e,"href",r)},d(o){o&&h(e)}}}function tt(i){let e;function l(n,r){return n[0].type==["o:Media"]||n[0].title==null||n[0].title.length==1?ul:al}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,r){s.m(n,r),P(n,e,r)},p(n,r){t===(t=l(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&h(e)}}}function al(i){let e,l,t;return{c(){e=L("a"),l=Y("→ Metadata"),this.h()},l(s){e=A(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=Q(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",t=`${i[3]}/item/${i[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),z(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&p(e,"href",t)},d(s){s&&h(e)}}}function ul(i){let e,l,t;return{c(){e=L("a"),l=Y("→ Metadata"),this.h()},l(s){e=A(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=Q(n,"→ Metadata"),n.forEach(h),this.h()},h(){p(e,"class","link svelte-x5b8hf"),p(e,"href",t=`${i[3]}/media/${i[4]}`),p(e,"target","_blank"),p(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),z(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&p(e,"href",t)},d(s){s&&h(e)}}}function fl(i){let e,l,t,s,n,r;function o(d,_){return d[0].img?ol:d[5]?rl:nl}let a=o(i),c=a(i),f=i[8]!=null&&xe(i),u=i[3]&&tt(i);return{c(){e=L("div"),c.c(),l=R(),f&&f.c(),t=R(),u&&u.c(),this.h()},l(d){e=A(d,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var _=M(e);c.l(_),l=X(_),f&&f.l(_),t=X(_),u&&u.l(_),_.forEach(h),this.h()},h(){p(e,"class","node svelte-x5b8hf"),p(e,"title",s=i[0].title),p(e,"source",i[9]),p(e,"target",i[4]),p(e,"data-id",i[4]),Ae(e,"selected",i[7]),Ae(e,"linkToEssay",i[8]!=null)},m(d,_){P(d,e,_),c.m(e,null),z(e,l),f&&f.m(e,null),z(e,t),u&&u.m(e,null),i[21](e),n||(r=[H(e,"mouseover",i[22]),H(e,"mouseleave",function(){Re(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),H(e,"click",i[18]),H(e,"keydown",i[19]),H(e,"focus",i[20])],n=!0)},p(d,[_]){i=d,a===(a=o(i))&&c?c.p(i,_):(c.d(1),c=a(i),c&&(c.c(),c.m(e,l))),i[8]!=null?f?f.p(i,_):(f=xe(i),f.c(),f.m(e,t)):f&&(f.d(1),f=null),i[3]?u?u.p(i,_):(u=tt(i),u.c(),u.m(e,null)):u&&(u.d(1),u=null),_&1&&s!==(s=i[0].title)&&p(e,"title",s),_&512&&p(e,"source",i[9]),_&16&&p(e,"target",i[4]),_&16&&p(e,"data-id",i[4]),_&128&&Ae(e,"selected",i[7]),_&256&&Ae(e,"linkToEssay",i[8]!=null)},i:J,o:J,d(d){d&&h(e),c.d(),f&&f.d(),u&&u.d(),i[21](null),n=!1,De(r)}}}function cl(i,e,l){let t,s,n,r,o,a,c=J,f=()=>(c(),c=Me(S,D=>l(17,a=D)),S),u,d=J,_=()=>(d(),d=Me(C,D=>l(24,u=D)),C),y,T;le(i,_e,D=>l(16,o=D)),le(i,Xe,D=>l(25,y=D)),le(i,Ge,D=>l(10,T=D)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>d());let{datum:O}=e,{entities:S}=e;f();let{updatePosition:C}=e;_();let{essaysItems:m}=e,{site:g}=e,{openNode:b}=e,I,w=null;Dt(()=>{const D=O.source;D==`item_${y}`&&D!=w&&b(O,1),w=`item_${y}`}),St(()=>{te(C,u=!0,u)});function N(){te(C,u=!0,u)}function B(D){var j;const E=D.split("/"),V=a.find(ie=>ie["o:id"]==E.slice(-1)[0]);return(j=V==null?void 0:V.thumbnail_display_urls)==null?void 0:j.large}let v;function k(D){const E=D,V=document.querySelector(`.node-highlite[data-id="${E}"]`);V&&V.classList.add("hover"),v.classList.add("hover")}function U(D){const E=D,V=document.querySelector(`.node-highlite[data-id="${E}"]`);V&&V.classList.remove("hover"),v.classList.remove("hover")}function Z(D){Oe.call(this,i,D)}function se(D){Oe.call(this,i,D)}function q(D){Oe.call(this,i,D)}function $(D){Ie[D?"unshift":"push"](()=>{v=D,l(6,v)})}const K=()=>{te(Ge,T=s,T),k(s)};return i.$$set=D=>{"datum"in D&&l(0,O=D.datum),"entities"in D&&f(l(1,S=D.entities)),"updatePosition"in D&&_(l(2,C=D.updatePosition)),"essaysItems"in D&&l(14,m=D.essaysItems),"site"in D&&l(3,g=D.site),"openNode"in D&&l(15,b=D.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&a&&l(5,I=B(O.target)),i.$$.dirty&1&&l(9,t=O.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=O.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=m.find(D=>D.id==s)),i.$$.dirty&65537&&l(7,r=o.some(D=>(D==null?void 0:D.id)==O.target))},[O,S,C,g,s,I,v,r,n,t,T,N,k,U,m,b,o,a,Z,se,q,$,K]}class Lt extends Ee{constructor(e){super(),we(this,e,cl,fl,Pe,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var dl=0;function _l(){return++dl}var He=Function("return this")();typeof He.__nextId!="function"&&(He.__nextId=_l);function At(){return"uid-"+He.__nextId()}function ml(i){let e,l,t;return{c(){e=L("div"),this.h()},l(s){e=A(s,"DIV",{source:!0,target:!0}),M(e).forEach(h),this.h()},h(){p(e,"source",l=i[0].source.split("/").slice(-1)[0]),p(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){P(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&p(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&p(e,"target",t)},i:J,o:J,d(s){s&&h(e),i[8](null)}}}let lt=0;function hl(i,e,l){let t,s,n,r,o=J,a=()=>(o(),o=Me(_,m=>l(5,r=m)),_),c,f;le(i,Ve,m=>l(12,n=m)),le(i,ze,m=>l(6,c=m)),le(i,_e,m=>l(7,f=m)),i.$$.on_destroy.push(()=>o());let{datum:u}=e,{label:d}=e,{updatePosition:_}=e;a();let y,T=At();function O(m,g=0,b){const I=m.split("/").slice(-1)[0],w=[...document.querySelectorAll(`.node[data-id="${I}"]`)],N=[];return w.forEach(B=>{const v=B.getBoundingClientRect(),k={x:v.x+c,y:v.y+g,width:v.width-g/2,height:v.height,selected:"selected"};N.push(k)}),N}function S(){delete n[T],te(_,r=!1,r);const m=O(u.source,lt),g=O(u.target,lt);y&&(y.getBoundingClientRect().x,y.getBoundingClientRect().y),m.forEach(b=>{g.forEach(I=>{let w=100;const N=b==null?void 0:b.selected;let B,v,k,U,Z;B=b.x+b.width,v=b.y,k=I.x,U=I.y,I.x<b.x||I.x==b.x?Z=I.x-w*5:I.x==b.x?Z=I.x-w*3:Z=I.x-w,u.source.includes("item_")&&(Z=I.x-w);const se=B+w,q=v,$=I.y,K=`M${B},${v}C${se},${q} ${Z},${$} ${k},${U}`;te(Ve,n[T]=n[T]||[],n),n[T].push({class:s,d:K,label:d,selected:N,datum:{source:u.source.split("/").at(-1),target:u.target.split("/").at(-1)},reverse:u==null?void 0:u.reverse})})})}St(()=>{delete n[T],te(Ve,n=[],n)});function C(m){Ie[m?"unshift":"push"](()=>{y=m,l(2,y)})}return i.$$set=m=>{"datum"in m&&l(0,u=m.datum),"label"in m&&l(3,d=m.label),"updatePosition"in m&&a(l(1,_=m.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&S(),i.$$.dirty&128&&l(4,t=f.slice(-1)[0].id),i.$$.dirty&17&&(s=u.target==t||u.source==t?"highlite":"")},[u,_,y,d,t,r,c,f,C]}class Nt extends Ee{constructor(e){super(),we(this,e,hl,ml,Pe,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function pl(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let r;for(;r=e.exec(i);)if(!r[2].includes("http")){const m=r[3],g=r[2];g.includes("item/")&&l.push(g.split("/")[1]),g.includes("set/")&&s.push(g.split("/")[1]),g.includes("media/")&&t.push(g.split("/")[1]),n.push({label:m,id:g.split("/")[1]})}const o=Wt,c=C(l,o).map(m=>{const g=`${ce}/items?${m.map(b=>`id[]=${b}`).join("&")}`;return fetch(g).then(b=>b.json())}),u=C(s,o).map(m=>{const g=`${ce}/item_sets?${m.map(b=>`id[]=${b}`).join("&")}`;return fetch(g).then(b=>b.json())}),_=C(t,o).map(m=>{const g=`${ce}/media?${m.map(b=>`id[]=${b}`).join("&")}`;return fetch(g).then(b=>b.json())}),y=await Promise.all(c),T=await Promise.all(u),O=await Promise.all(_),S=[...y.flat(),...O.flat(),...T.flat()];for(let m=0;m<S.length;m++){const g=n.find(I=>S[m]["o:id"]==I.id),b=S[m];g.uniqueId=At(),g.data=b}return n;function C(m,g){const b=[];for(let I=0;I<m.length;I+=g)b.push(m.slice(I,I+g));return b}}async function Ot(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,r=gl(s,n);e=[...e,...r]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function gl(i,e){var a;let l=[],t=`${ce}/resources/${i["o:id"]}`;e&&l.push({source:`${ce}/resources/${e.id}`,target:t,img:(a=i==null?void 0:i.thumbnail_display_urls)==null?void 0:a.large,title:i["o:title"]});let s,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let o=async function(c){var f,u,d,_,y,T,O,S,C,m,g,b;for(let I in c)if(I==="@id"&&c[I].startsWith(ce)&&(c["o:title"]||c.display_title||n==!0)){let w=c[I].split("/").pop(),N=`${ce}/resources/${w}`;const B=c["o:title"]||c.display_title,v=(c==null?void 0:c.thumbnail_url)||((f=c==null?void 0:c.thumbnail_display_urls)==null?void 0:f.large),k=l.some(se=>se.source===t&&se.target===N);let U=((d=(u=c.property_label)==null?void 0:u.replace("_"," "))==null?void 0:d.replace(r,""))||(s==null?void 0:s.replace(r,""));const Z=Ut.map(se=>se.props.includes(U)?se.key:"").find(Boolean);k||l.push({source:t,target:N,title:B,img:v,property:U,category:Z,reverse:n})}else if(I==="@id"&&!c[I].startsWith(ce)&&c["o:label"]){let w=((y=(_=c.property_label)==null?void 0:_.replace("_"," "))==null?void 0:y.replace(r,""))||(s==null?void 0:s.replace(r,""));l.push({source:t,target:c[I],title:c["o:label"],property:w,category:"",external:!0,reverse:n})}else if(I==="@id"&&s=="media"&&t.split("/").pop()!=((T=c==null?void 0:c["o:primary_media"])==null?void 0:T["@id"].split("/").pop())){let w=((S=(O=c.property_label)==null?void 0:O.replace("_"," "))==null?void 0:S.replace(r,""))||(s==null?void 0:s.replace(r,"")),N=c[I].split("/").pop(),B=`${ce}/resources/${N}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else if(I==="@id"&&s=="item"){let w=((m=(C=c.property_label)==null?void 0:C.replace("_"," "))==null?void 0:m.replace(r,""))||(s==null?void 0:s.replace(r,"")),N=c[I].split("/").pop(),B=`${ce}/resources/${N}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else typeof c[I]=="object"&&(isNaN(I)&&(s=(b=(g=(I==null?void 0:I.split(":"))[1])==null?void 0:g.split("_"))==null?void 0:b.join(" "),I=="@reverse"&&(n=!0)),o(c[I]))};return o(i),l}function st(i,e,l){const t=i.slice();return t[22]=e[l],t}function it(i){let e,l;return{c(){e=L("div"),l=Y("Loading..."),this.h()},l(t){e=A(t,"DIV",{class:!0});var s=M(e);l=Q(s,"Loading..."),s.forEach(h),this.h()},h(){p(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),z(e,l)},d(t){t&&h(e)}}}function nt(i){let e,l,t=i[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=ot(st(i,t,r));const n=r=>F(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let a=0;a<s.length;a+=1)s[a].m(r,o);P(r,e,o),l=!0},p(r,o){if(o&639){t=r[0];let a;for(a=0;a<t.length;a+=1){const c=st(r,t,a);s[a]?(s[a].p(c,o),G(s[a],1)):(s[a]=ot(c),s[a].c(),G(s[a],1),s[a].m(e.parentNode,e))}for(ae(),a=t.length;a<s.length;a+=1)n(a);ue()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)G(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)F(s[o]);l=!1},d(r){Se(s,r),r&&h(e)}}}function bl(i){var t;let e,l;return e=new Nt({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){he(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ge(e,s,n),l=!0},p(s,n){var o;const r={};n&1&&(r.datum=s[22]),n&8&&(r.updatePosition=s[3]),n&1&&(r.label=((o=s[22])==null?void 0:o.property)||""),e.$set(r)},i(s){l||(G(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){be(e,s)}}}function vl(i){let e,l,t=i[22].source!=i[22].target&&rt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&G(t,1)):(t=rt(s),t.c(),G(t,1),t.m(e.parentNode,e)):t&&(ae(),F(t,1,1,()=>{t=null}),ue())},i(s){l||(G(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function rt(i){var c;let e,l,t,s,n;const r=[yl,kl],o=[];function a(f,u){var d;return(d=f[22])!=null&&d.external?1:0}return e=a(i),l=o[e]=r[e](i),s=new Nt({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=R(),he(s.$$.fragment)},l(f){l.l(f),t=X(f),pe(s.$$.fragment,f)},m(f,u){o[e].m(f,u),P(f,t,u),ge(s,f,u),n=!0},p(f,u){var y;let d=e;e=a(f),e===d?o[e].p(f,u):(ae(),F(o[d],1,1,()=>{o[d]=null}),ue(),l=o[e],l?l.p(f,u):(l=o[e]=r[e](f),l.c()),G(l,1),l.m(t.parentNode,t));const _={};u&1&&(_.datum=f[22]),u&8&&(_.updatePosition=f[3]),u&1&&(_.label=((y=f[22])==null?void 0:y.property)||""),s.$set(_)},i(f){n||(G(l),G(s.$$.fragment,f),n=!0)},o(f){F(l),F(s.$$.fragment,f),n=!1},d(f){o[e].d(f),f&&h(t),be(s,f)}}}function kl(i){let e,l,t,s;return l=new Lt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=L("a"),he(l.$$.fragment),this.h()},l(n){e=A(n,"A",{href:!0,target:!0,rel:!0});var r=M(e);pe(l.$$.fragment,r),r.forEach(h),this.h()},h(){p(e,"href",t=i[22].target),p(e,"target","_blank"),p(e,"rel","noreferrer")},m(n,r){P(n,e,r),ge(l,e,null),s=!0},p(n,r){const o={};r&64&&(o.site=n[6]),r&4&&(o.entities=n[2]),r&8&&(o.updatePosition=n[3]),r&1&&(o.datum=n[22]),r&32&&(o.essaysItems=n[5]),l.$set(o),(!s||r&1&&t!==(t=n[22].target))&&p(e,"href",t)},i(n){s||(G(l.$$.fragment,n),s=!0)},o(n){F(l.$$.fragment,n),s=!1},d(n){n&&h(e),be(l)}}}function yl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Lt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){he(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ge(e,n,r),l=!0},p(n,r){i=n;const o={};r&64&&(o.site=i[6]),r&4&&(o.entities=i[2]),r&8&&(o.updatePosition=i[3]),r&1&&(o.datum=i[22]),r&32&&(o.essaysItems=i[5]),e.$set(o)},i(n){l||(G(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function ot(i){let e,l,t,s,n;function r(...f){return i[15](i[22],...f)}const o=[vl,bl],a=[];function c(f,u){return u&3&&(e=null),e==null&&(e=!!f[1].some(r)),e?0:f[22].source&&f[22].target&&f[22].source!=f[22].target?1:-1}return~(l=c(i,-1))&&(t=a[l]=o[l](i)),{c(){t&&t.c(),s=W()},l(f){t&&t.l(f),s=W()},m(f,u){~l&&a[l].m(f,u),P(f,s,u),n=!0},p(f,u){i=f;let d=l;l=c(i,u),l===d?~l&&a[l].p(i,u):(t&&(ae(),F(a[d],1,1,()=>{a[d]=null}),ue()),~l?(t=a[l],t?t.p(i,u):(t=a[l]=o[l](i),t.c()),G(t,1),t.m(s.parentNode,s)):t=null)},i(f){n||(G(t),n=!0)},o(f){F(t),n=!1},d(f){~l&&a[l].d(f),f&&h(s)}}}function Il(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,r=i[8]&&it(),o=s&&nt(i);return{c(){e=L("section"),r&&r.c(),l=R(),t=L("div"),o&&o.c()},l(a){e=A(a,"SECTION",{});var c=M(e);r&&r.l(c),l=X(c),t=A(c,"DIV",{});var f=M(t);o&&o.l(f),f.forEach(h),c.forEach(h)},m(a,c){P(a,e,c),r&&r.m(e,null),z(e,l),z(e,t),o&&o.m(t,null),i[18](e),n=!0},p(a,[c]){a[8]?r||(r=it(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),c&1&&(s=a[0]&&typeof a[0]=="object"&&Object.keys(a[0]).length>0),s?o?(o.p(a,c),c&1&&G(o,1)):(o=nt(a),o.c(),G(o,1),o.m(t,null)):o&&(ae(),F(o,1,1,()=>{o=null}),ue())},i(a){n||(G(o),n=!0)},o(a){F(o),n=!1},d(a){a&&h(e),r&&r.d(),o&&o.d(),i[18](null)}}}function El(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function wl(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function Pl(i,e,l){let t,s=J,n=()=>(s(),s=Me(d,k=>l(20,t=k)),d),r;le(i,_e,k=>l(21,r=k)),i.$$.on_destroy.push(()=>s());let{category:o}=e,{data:a}=e,{newData:c}=e,{dataLen:f}=e,{entities:u}=e,{updatePosition:d}=e;n();let{index:_}=e,{loadData:y}=e,{defaultNodes:T}=e,{batchSize:O}=e,{essaysItems:S}=e,{site:C}=e,m,g,b={nodes:[],links:[]};async function I(k,U){El(U),l(8,g=!0),r.splice(U,r.length-U);let Z=r.map(E=>E.data).flat();const q=await(await fetch(k.target)).json();if(q!=null&&q["o:items"]&&r.length==1){let E=[];const V=q["o:items"]["@id"];(await(await fetch(V)).json()).forEach(ne=>{E.push(ne)});let x=E.map(ne=>({"o:title":ne["o:title"],"@id":ne["@id"],thumbnail_display_urls:ne.thumbnail_display_urls}));q.related={...x}}b=await Ot([{data:q}]);let $=b.links.filter(E=>E.source===k.target||E.target===k.target),K=wl([...T,...Z],$),D=$.slice(0,O);te(_e,r[U]={id:k.target,data:$.sort((E,V)=>{if(E.property)return E.property.localeCompare(V.property)}),page:0,new:K,paginate:D},r),l(8,g=!1),K.length>0&&y(D,O),te(d,t=!0,t)}const w=(k,U)=>(U==null?void 0:U.title)===k.title,N=k=>{I(k,_+1)},B=k=>{I(k,_+1)};function v(k){Ie[k?"unshift":"push"](()=>{m=k,l(7,m)})}return i.$$set=k=>{"category"in k&&l(10,o=k.category),"data"in k&&l(0,a=k.data),"newData"in k&&l(1,c=k.newData),"dataLen"in k&&l(11,f=k.dataLen),"entities"in k&&l(2,u=k.entities),"updatePosition"in k&&n(l(3,d=k.updatePosition)),"index"in k&&l(4,_=k.index),"loadData"in k&&l(12,y=k.loadData),"defaultNodes"in k&&l(13,T=k.defaultNodes),"batchSize"in k&&l(14,O=k.batchSize),"essaysItems"in k&&l(5,S=k.essaysItems),"site"in k&&l(6,C=k.site)},[a,c,u,d,_,S,C,m,g,I,o,f,y,T,O,w,N,B,v]}class Vt extends Ee{constructor(e){super(),we(this,e,Pl,Il,Pe,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function at(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function We(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function ut(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...o){return i[20](t[37],...o)});t[38]=s;const n=t[32].data.filter(function(...o){return i[21](t[37],...o)}).length;return t[36]=n,t}function Tl(i){let e,l,t=i[5],s=[];for(let r=0;r<t.length;r+=1)s[r]=ht(at(i,t,r));const n=r=>F(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let a=0;a<s.length;a+=1)s[a].m(r,o);P(r,e,o),l=!0},p(r,o){if(o[0]&16063){t=r[5];let a;for(a=0;a<t.length;a+=1){const c=at(r,t,a);s[a]?(s[a].p(c,o),G(s[a],1)):(s[a]=ht(c),s[a].c(),G(s[a],1),s[a].m(e.parentNode,e))}for(ae(),a=t.length;a<s.length;a+=1)n(a);ue()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)G(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)F(s[o]);l=!1},d(r){Se(s,r),r&&h(e)}}}function Dl(i){let e,l,t;return{c(){e=L("div"),l=L("h4"),t=Y("Loading Graph..."),this.h()},l(s){e=A(s,"DIV",{});var n=M(e);l=A(n,"H4",{class:!0});var r=M(l);t=Q(r,"Loading Graph..."),r.forEach(h),n.forEach(h),this.h()},h(){p(l,"class","loading svelte-d0zru6")},m(s,n){P(s,e,n),z(e,l),z(l,t)},p:J,i:J,o:J,d(s){s&&h(e)}}}function Sl(i){let e,l;return{c(){e=L("div"),l=Y("There are no connections."),this.h()},l(t){e=A(t,"DIV",{class:!0});var s=M(e);l=Q(s,"There are no connections."),s.forEach(h),this.h()},h(){p(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),z(e,l)},p:J,i:J,o:J,d(t){t&&h(e)}}}function Ll(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,r=i[3].mainCategories,o=[];for(let u=0;u<r.length;u+=1)o[u]=ct(ut(i,r,u));const a=u=>F(o[u],1,1,()=>{o[u]=null});let c=t&&dt(We(i)),f=i[32].paginate.length<i[32].new.length&&mt(i);return{c(){e=L("div");for(let u=0;u<o.length;u+=1)o[u].c();l=R(),c&&c.c(),s=R(),f&&f.c()},l(u){e=A(u,"DIV",{});var d=M(e);for(let _=0;_<o.length;_+=1)o[_].l(d);l=X(d),c&&c.l(d),s=X(d),f&&f.l(d),d.forEach(h)},m(u,d){P(u,e,d);for(let _=0;_<o.length;_+=1)o[_].m(e,null);z(e,l),c&&c.m(e,null),z(e,s),f&&f.m(e,null),n=!0},p(u,d){if(d[0]&7725){r=u[3].mainCategories;let _;for(_=0;_<r.length;_+=1){const y=ut(u,r,_);o[_]?(o[_].p(y,d),G(o[_],1)):(o[_]=ct(y),o[_].c(),G(o[_],1),o[_].m(e,l))}for(ae(),_=r.length;_<o.length;_+=1)a(_);ue()}d[0]&40&&(t=u[32].paginate.filter(u[19]).length>0),t?c?(c.p(We(u),d),d[0]&40&&G(c,1)):(c=dt(We(u)),c.c(),G(c,1),c.m(e,s)):c&&(ae(),F(c,1,1,()=>{c=null}),ue()),u[32].paginate.length<u[32].new.length?f?f.p(u,d):(f=mt(u),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(u){if(!n){for(let d=0;d<r.length;d+=1)G(o[d]);G(c),n=!0}},o(u){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)F(o[d]);F(c),n=!1},d(u){u&&h(e),Se(o,u),c&&c.d(),f&&f.d()}}}function ft(i){let e,l;return e=new Vt({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(G(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){be(e,t)}}}function ct(i){let e,l,t=i[38].length>0&&ft(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&G(t,1)):(t=ft(s),t.c(),G(t,1),t.m(e.parentNode,e)):t&&(ae(),F(t,1,1,()=>{t=null}),ue())},i(s){l||(G(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function dt(i){let e,l,t=i[35].length>0&&_t(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&G(t,1)):(t=_t(s),t.c(),G(t,1),t.m(e.parentNode,e)):t&&(ae(),F(t,1,1,()=>{t=null}),ue())},i(s){l||(G(t),l=!0)},o(s){F(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function _t(i){let e,l;return e=new Vt({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(G(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){be(e,t)}}}function mt(i){let e,l,t,s;return{c(){e=L("div"),l=Y("Load more"),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);l=Q(r,"Load more"),r.forEach(h),this.h()},h(){p(e,"class","more svelte-d0zru6")},m(n,r){P(n,e,r),z(e,l),t||(s=[H(e,"click",function(){Re(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),H(e,"keydown",function(){Re(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,r){i=n},d(n){n&&h(e),t=!1,De(s)}}}function ht(i){let e,l,t,s,n,r,o;const a=[Ll,Sl],c=[];function f(u,d){var _,y;return(_=u[32])!=null&&_.new&&((y=u[32])==null?void 0:y.new.length)>0?0:1}return l=f(i),t=c[l]=a[l](i),{c(){e=L("div"),t.c(),s=R(),this.h()},l(u){e=A(u,"DIV",{class:!0,id:!0});var d=M(e);t.l(d),s=X(d),d.forEach(h),this.h()},h(){p(e,"class","links svelte-d0zru6"),p(e,"id","col_"+i[34])},m(u,d){P(u,e,d),c[l].m(e,null),z(e,s),i[22](e),n=!0,r||(o=[H(e,"scroll",i[23]),H(e,"click",i[24]),H(e,"keypress",i[25])],r=!0)},p(u,d){let _=l;l=f(u),l===_?c[l].p(u,d):(ae(),F(c[_],1,1,()=>{c[_]=null}),ue(),t=c[l],t?t.p(u,d):(t=c[l]=a[l](u),t.c()),G(t,1),t.m(e,s))},i(u){n||(G(t),n=!0)},o(u){F(t),n=!1},d(u){u&&h(e),c[l].d(),i[22](null),r=!1,De(o)}}}function pt(i){let e,l,t,s;return{c(){e=L("div"),l=Y("✕"),this.h()},l(n){e=A(n,"DIV",{class:!0});var r=M(e);l=Q(r,"✕"),r.forEach(h),this.h()},h(){p(e,"class","close svelte-d0zru6")},m(n,r){P(n,e,r),z(e,l),t||(s=[H(e,"click",i[27]),H(e,"keypress",i[28])],t=!0)},p:J,d(n){n&&h(e),t=!1,De(s)}}}function Al(i){let e,l,t,s,n,r;const o=[Dl,Tl],a=[];function c(u,d){return u[8].length==0?0:1}l=c(i),t=a[l]=o[l](i);let f=i[5].length>1&&pt(i);return{c(){e=L("div"),t.c(),s=R(),f&&f.c(),n=W(),this.h()},l(u){e=A(u,"DIV",{class:!0});var d=M(e);t.l(d),d.forEach(h),s=X(u),f&&f.l(u),n=W(),this.h()},h(){p(e,"class","graph svelte-d0zru6")},m(u,d){P(u,e,d),a[l].m(e,null),i[26](e),P(u,s,d),f&&f.m(u,d),P(u,n,d),r=!0},p(u,d){let _=l;l=c(u),l===_?a[l].p(u,d):(ae(),F(a[_],1,1,()=>{a[_]=null}),ue(),t=a[l],t?t.p(u,d):(t=a[l]=o[l](u),t.c()),G(t,1),t.m(e,null)),u[5].length>1?f?f.p(u,d):(f=pt(u),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null)},i(u){r||(G(t),r=!0)},o(u){F(t),r=!1},d(u){u&&h(e),a[l].d(),i[26](null),u&&h(s),f&&f.d(u),u&&h(n)}}}function Nl(i,e,l){const t=l-e;return(i-e)/t*100}function Ol(i,e,l){const t=l-e;return e+t*i/100}function Vl(i,e,l){let t,s,n,r;le(i,Te,E=>l(30,s=E)),le(i,_e,E=>l(5,n=E));let{updatePosition:o}=e,{handlePosition:a}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:u}=e,{config:d}=e,{items:_}=e,{screenSize:y}=e,T;const O=ve([]);le(i,O,E=>l(8,r=E));let S=d.batch,C,m=c.nodes.filter(E=>f.includes(E.id));Je(async()=>{g(c.nodes,S)}),Dt(()=>{C.lastElementChild&&y>600&&C.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),a()});async function g(E,V){const j=E.map(x=>{var fe,ee;return(((fe=x==null?void 0:x.id)==null?void 0:fe.split("/"))||((ee=x==null?void 0:x.target)==null?void 0:ee.split("/"))).slice(-1)[0]}),ie=Math.ceil(j.length/V);for(let x=0;x<ie;x++){const ne=j.slice(x*V,(x+1)*V);let fe=`${d.api}/items?${ne.map(oe=>`id[]=${oe}`).join("&")}`,ee=await fetch(fe),de=await ee.json();O.update(oe=>(oe.includes(...de)||oe.push(...de),oe)),de.length!=ne.length&&(fe=`${d.api}/media?${ne.map(oe=>`id[]=${oe}`).join("&")}`,ee=await fetch(fe),de=await ee.json(),O.update(oe=>(oe.includes(...de)||oe.push(...de),oe)))}}let b;const I=(E,V)=>{var j,ie,x,ne,fe;if(V!=null){const ee=((j=n[E])==null?void 0:j.page)+1||0;te(_e,n[E]={...n[E],page:ee,paginate:(ie=n[E])==null?void 0:ie.data.slice(0,ee*S)},n),(x=n[E])!=null&&x.data&&((ne=n[E])==null?void 0:ne.paginate.length)!=((fe=n[E])==null?void 0:fe.data.length)&&g(n[E].paginate.slice(-S),S)}};let w=0;function N(E){var V,j,ie,x,ne,fe;if(s){const ee=document.querySelectorAll(".links:first-of-type .node");let de=(V=ee==null?void 0:ee[w])==null?void 0:V.offsetTop,oe=(j=ee==null?void 0:ee[w])==null?void 0:j.getAttribute("data-id"),Fe=(ie=ee==null?void 0:ee[w+1])==null?void 0:ie.offsetTop,zt=(x=ee==null?void 0:ee[w+1])==null?void 0:x.getAttribute("data-id"),Mt=(ne=document.querySelector(`.node-highlite[data-id="${oe}"]`))==null?void 0:ne.offsetTop,qt=(fe=document.querySelector(`.node-highlite[data-id="${zt}"]`))==null?void 0:fe.offsetTop,Ct=Nl(E,de,Fe),Be=Ol(Ct,Mt,qt);const Le=document.querySelector(".markdown__container");E>Fe&&w++,E<de&&w!=0&&w--,Le&&Be&&de!==Fe&&Be>0&&(Le==null||Le.scrollTo({top:Be}))}}const B=E=>!d.mainCategories.some(V=>V.props.includes(E.property)),v=(E,V)=>E.props.includes(V.property),k=(E,V)=>E.props.includes(V.property);function U(E){Ie[E?"unshift":"push"](()=>{b=E,l(7,b)})}const Z=()=>{let E=document.querySelector("#col_0");E.addEventListener("scroll",V=>{l(4,T=E==null?void 0:E.scrollTop)}),a()},se=()=>{a()},q=()=>{a()};function $(E){Ie[E?"unshift":"push"](()=>{C=E,l(6,C)})}const K=()=>{te(_e,n=[],n),a()},D=()=>{te(_e,n=[],n)};return i.$$set=E=>{"updatePosition"in E&&l(0,o=E.updatePosition),"handlePosition"in E&&l(1,a=E.handlePosition),"data"in E&&l(14,c=E.data),"visibleItemsID"in E&&l(15,f=E.visibleItemsID),"essaysItems"in E&&l(2,u=E.essaysItems),"config"in E&&l(3,d=E.config),"items"in E&&l(16,_=E.items),"screenSize"in E&&l(17,y=E.screenSize)},i.$$.update=()=>{var E;i.$$.dirty[0]&65544&&l(18,t=_.filter(V=>V==null?void 0:V.data).map(V=>{var j,ie;return{type:V.data["@type"],img:(j=V.data)==null?void 0:j.thumbnail_display_urls.large,source:`item_${V.id}`,target:`${d.api}/resources/${V.id}`,title:((ie=V.data)==null?void 0:ie["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||_e&&((E=n==null?void 0:n[0])==null?void 0:E.data.length)==0)&&te(_e,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&N(T)},[o,a,u,d,T,n,C,b,r,O,S,m,g,I,c,f,_,y,t,B,v,k,U,Z,se,q,$,K,D]}class zl extends Ee{constructor(e){super(),we(this,e,Vl,Al,Pe,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function gt(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function bt(i,e,l){const t=i.slice();return t[6]=e[l],t}function vt(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Tt(gt(i,t,n));return{c(){e=ke("svg"),l=ke("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=ye(n,"svg",{class:!0});var r=M(e);l=ye(r,"g",{});var o=M(l);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(h),r.forEach(h),this.h()},h(){p(e,"class","svelte-1ddz0y9")},m(n,r){P(n,e,r),z(e,l);for(let o=0;o<s.length;o+=1)s[o].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let o;for(o=0;o<t.length;o+=1){const a=gt(n,t,o);s[o]?s[o].p(a,r):(s[o]=Tt(a),s[o].c(),s[o].m(l,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&h(e),Se(s,n)}}}function kt(i){let e,l,t=i[6].label+"",s,n,r,o,a,c,f,u,d=i[6].label+"",_,y,T,O,S,C,m=i[6].reverse&&i[6].label&&yt(),g=!i[6].reverse&&i[6].label&&It(),b=i[6].reverse&&i[6].label&&Et(),I=!i[6].reverse&&i[6].label&&wt();return{c(){e=ke("text"),l=ke("textPath"),s=Y(t),m&&m.c(),n=W(),g&&g.c(),f=ke("text"),u=ke("textPath"),_=Y(d),b&&b.c(),y=W(),I&&I.c(),this.h()},l(w){e=ye(w,"text",{class:!0,source:!0,target:!0});var N=M(e);l=ye(N,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=M(l);s=Q(B,t),m&&m.l(B),n=W(),g&&g.l(B),B.forEach(h),N.forEach(h),f=ye(w,"text",{class:!0,source:!0,target:!0});var v=M(f);u=ye(v,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var k=M(u);_=Q(k,d),b&&b.l(k),y=W(),I&&I.l(k),k.forEach(h),v.forEach(h),this.h()},h(){p(l,"alignment-baseline","middle"),p(l,"href",r="#path_"+i[2]),p(l,"startOffset","99%"),p(l,"text-anchor","end"),p(e,"class",o="background "+i[6].class+" svelte-1ddz0y9"),p(e,"source",a=i[6].datum.source),p(e,"target",c=i[6].datum.target),p(u,"alignment-baseline","middle"),p(u,"href",T="#path_"+i[2]),p(u,"startOffset","99%"),p(u,"text-anchor","end"),p(f,"class",O=Ce(i[6].class)+" svelte-1ddz0y9"),p(f,"source",S=i[6].datum.source),p(f,"target",C=i[6].datum.target)},m(w,N){P(w,e,N),z(e,l),z(l,s),m&&m.m(l,null),z(l,n),g&&g.m(l,null),P(w,f,N),z(f,u),z(u,_),b&&b.m(u,null),z(u,y),I&&I.m(u,null)},p(w,N){N&1&&t!==(t=w[6].label+"")&&me(s,t),w[6].reverse&&w[6].label?m||(m=yt(),m.c(),m.m(l,n)):m&&(m.d(1),m=null),!w[6].reverse&&w[6].label?g||(g=It(),g.c(),g.m(l,null)):g&&(g.d(1),g=null),N&1&&r!==(r="#path_"+w[2])&&p(l,"href",r),N&1&&o!==(o="background "+w[6].class+" svelte-1ddz0y9")&&p(e,"class",o),N&1&&a!==(a=w[6].datum.source)&&p(e,"source",a),N&1&&c!==(c=w[6].datum.target)&&p(e,"target",c),N&1&&d!==(d=w[6].label+"")&&me(_,d),w[6].reverse&&w[6].label?b||(b=Et(),b.c(),b.m(u,y)):b&&(b.d(1),b=null),!w[6].reverse&&w[6].label?I||(I=wt(),I.c(),I.m(u,null)):I&&(I.d(1),I=null),N&1&&T!==(T="#path_"+w[2])&&p(u,"href",T),N&1&&O!==(O=Ce(w[6].class)+" svelte-1ddz0y9")&&p(f,"class",O),N&1&&S!==(S=w[6].datum.source)&&p(f,"source",S),N&1&&C!==(C=w[6].datum.target)&&p(f,"target",C)},d(w){w&&h(e),m&&m.d(),g&&g.d(),w&&h(f),b&&b.d(),I&&I.d()}}}function yt(i){let e;return{c(){e=Y(" -")},l(l){e=Q(l," -")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function It(i){let e;return{c(){e=Y("→")},l(l){e=Q(l,"→")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function Et(i){let e;return{c(){e=Y("←")},l(l){e=Q(l,"←")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function wt(i){let e;return{c(){e=Y("→")},l(l){e=Q(l,"→")},m(l,t){P(l,e,t)},d(l){l&&h(e)}}}function Pt(i){let e,l,t,s,n,r,o=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&kt(i);return{c(){e=ke("path"),o&&o.c(),r=W(),this.h()},l(a){e=ye(a,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),M(e).forEach(h),o&&o.l(a),r=W(),this.h()},h(){p(e,"id",l="path_"+i[2]),p(e,"class",t=Ce(i[6].class)+" svelte-1ddz0y9"),p(e,"data-attr",s=i[6].selected),p(e,"d",n=i[6].d)},m(a,c){P(a,e,c),o&&o.m(a,c),P(a,r,c)},p(a,c){c&1&&l!==(l="path_"+a[2])&&p(e,"id",l),c&1&&t!==(t=Ce(a[6].class)+" svelte-1ddz0y9")&&p(e,"class",t),c&1&&s!==(s=a[6].selected)&&p(e,"data-attr",s),c&1&&n!==(n=a[6].d)&&p(e,"d",n),a[1]==a[6].datum.source&&a[6].selected!="not-selected"||a[1]==a[6].datum.target?o?o.p(a,c):(o=kt(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(a){a&&h(e),o&&o.d(a),a&&h(r)}}}function Tt(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Pt(bt(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&3){l=s[3];let r;for(r=0;r<l.length;r+=1){const o=bt(s,l,r);t[r]?t[r].p(o,n):(t[r]=Pt(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){Se(t,s),s&&h(e)}}}function Ml(i){let e=Object.keys(i[0]).length>0,l,t=e&&vt(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),P(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=vt(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:J,o:J,d(s){t&&t.d(s),s&&h(l)}}}function ql(i,e,l){let t,s;return le(i,Ve,n=>l(0,t=n)),le(i,Ge,n=>l(1,s=n)),[t,s]}class Cl extends Ee{constructor(e){super(),we(this,e,ql,Ml,Pe,{})}}function Gl(i){let e,l,t,s,n,r,o,a,c,f,u;return t=new il({props:{data:i[12],items:i[3],scrollTopVal:i[7]}}),r=new zl({props:{items:i[3],data:i[9],screenSize:i[0],essaysItems:i[5],visibleItemsID:i[4],handlePosition:i[14],updatePosition:i[13],config:Rt}}),a=new Cl({}),{c(){e=L("article"),l=L("section"),he(t.$$.fragment),s=R(),n=L("section"),he(r.$$.fragment),o=R(),he(a.$$.fragment),this.h()},l(d){e=A(d,"ARTICLE",{style:!0,class:!0});var _=M(e);l=A(_,"SECTION",{class:!0});var y=M(l);pe(t.$$.fragment,y),y.forEach(h),s=X(_),n=A(_,"SECTION",{class:!0});var T=M(n);pe(r.$$.fragment,T),T.forEach(h),o=X(_),pe(a.$$.fragment,_),_.forEach(h),this.h()},h(){var d;p(l,"class","markdown__container svelte-15zdm0q"),p(n,"class","graph__container svelte-15zdm0q"),Bt(e,"--theme-color",((d=i[12].meta)==null?void 0:d.color)||"blue"),p(e,"class","svelte-15zdm0q")},m(d,_){P(d,e,_),z(e,l),ge(t,l,null),i[19](l),z(e,s),z(e,n),ge(r,n,null),z(e,o),ge(a,e,null),i[26](e),c=!0,f||(u=[H(l,"wheel",i[20],{passive:!0}),H(l,"scroll",i[21]),H(n,"wheel",i[22],{passive:!0}),H(e,"resize",i[14]),H(e,"scroll",i[23]),H(e,"touchmove",i[24],{passive:!0}),H(e,"click",i[25]),H(e,"keypress",i[17])],f=!0)},p(d,_){const y={};_&8&&(y.items=d[3]),_&128&&(y.scrollTopVal=d[7]),t.$set(y);const T={};_&8&&(T.items=d[3]),_&512&&(T.data=d[9]),_&1&&(T.screenSize=d[0]),_&32&&(T.essaysItems=d[5]),_&16&&(T.visibleItemsID=d[4]),r.$set(T)},i(d){c||(G(t.$$.fragment,d),G(r.$$.fragment,d),G(a.$$.fragment,d),c=!0)},o(d){F(t.$$.fragment,d),F(r.$$.fragment,d),F(a.$$.fragment,d),c=!1},d(d){d&&h(e),be(t),i[19](null),be(r),be(a),i[26](null),f=!1,De(u)}}}function Fl(i){let e,l,t,s;return{c(){e=L("article"),l=L("section"),t=L("h4"),s=Y("Loading..."),this.h()},l(n){e=A(n,"ARTICLE",{class:!0});var r=M(e);l=A(r,"SECTION",{class:!0});var o=M(l);t=A(o,"H4",{});var a=M(t);s=Q(a,"Loading..."),a.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-15zdm0q"),p(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),z(e,l),z(l,t),z(t,s)},p:J,i:J,o:J,d(n){n&&h(e)}}}function Bl(i){let e,l,t,s;return{c(){e=L("article"),l=L("section"),t=L("h4"),s=Y("404 Page not found"),this.h()},l(n){e=A(n,"ARTICLE",{class:!0});var r=M(e);l=A(r,"SECTION",{class:!0});var o=M(l);t=A(o,"H4",{});var a=M(t);s=Q(a,"404 Page not found"),a.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){p(l,"class","short_text svelte-15zdm0q"),p(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),z(e,l),z(l,t),z(t,s)},p:J,i:J,o:J,d(n){n&&h(e)}}}function Ul(i){var N,B;let e,l,t,s,n,r,o,a,c,f,u,d,_,y,T,O,S,C,m,g,b,I,w;return document.title=e=((B=(N=i[12])==null?void 0:N.meta)==null?void 0:B.title)||Ne,{c(){l=R(),t=L("meta"),s=R(),n=L("meta"),o=R(),a=L("meta"),c=R(),f=L("meta"),u=R(),d=L("meta"),_=R(),y=L("meta"),T=R(),O=L("meta"),C=R(),m=L("meta"),g=R(),b=L("meta"),I=R(),w=L("meta"),this.h()},l(v){l=X(v),t=A(v,"META",{name:!0,content:!0}),s=X(v),n=A(v,"META",{property:!0,content:!0}),o=X(v),a=A(v,"META",{property:!0,content:!0}),c=X(v),f=A(v,"META",{property:!0,content:!0}),u=X(v),d=A(v,"META",{property:!0,content:!0}),_=X(v),y=A(v,"META",{name:!0,content:!0}),T=X(v),O=A(v,"META",{property:!0,content:!0}),C=X(v),m=A(v,"META",{name:!0,content:!0}),g=X(v),b=A(v,"META",{name:!0,content:!0}),I=X(v),w=A(v,"META",{name:!0,content:!0}),this.h()},h(){var v,k,U,Z,se,q,$,K,D,E,V,j,ie,x;p(t,"name","description"),p(t,"content",((k=(v=i[12])==null?void 0:v.meta)==null?void 0:k.description)||Ue),p(n,"property","og:url"),p(n,"content",r=i[8].url.origin),p(a,"property","og:title"),p(a,"content",((Z=(U=i[12])==null?void 0:U.meta)==null?void 0:Z.title)||Ne),p(f,"property","og:description"),p(f,"content",((q=(se=i[12])==null?void 0:se.meta)==null?void 0:q.description)||Ue),p(d,"property","og:image"),p(d,"content",((K=($=i[12])==null?void 0:$.meta)==null?void 0:K.cover)||Ye),p(y,"name","twitter:card"),p(y,"content","summary_large_image"),p(O,"property","twitter:url"),p(O,"content",S=i[8].url.origin),p(m,"name","twitter:title"),p(m,"content",((E=(D=i[12])==null?void 0:D.meta)==null?void 0:E.title)||Ne),p(b,"name","twitter:description"),p(b,"content",((j=(V=i[12])==null?void 0:V.meta)==null?void 0:j.description)||Ue),p(w,"name","twitter:image"),p(w,"content",((x=(ie=i[12])==null?void 0:ie.meta)==null?void 0:x.cover)||Ye)},m(v,k){P(v,l,k),P(v,t,k),P(v,s,k),P(v,n,k),P(v,o,k),P(v,a,k),P(v,c,k),P(v,f,k),P(v,u,k),P(v,d,k),P(v,_,k),P(v,y,k),P(v,T,k),P(v,O,k),P(v,C,k),P(v,m,k),P(v,g,k),P(v,b,k),P(v,I,k),P(v,w,k)},p(v,k){var U,Z;k&4096&&e!==(e=((Z=(U=v[12])==null?void 0:U.meta)==null?void 0:Z.title)||Ne)&&(document.title=e),k&256&&r!==(r=v[8].url.origin)&&p(n,"content",r),k&256&&S!==(S=v[8].url.origin)&&p(O,"content",S)},d(v){v&&h(l),v&&h(t),v&&h(s),v&&h(n),v&&h(o),v&&h(a),v&&h(c),v&&h(f),v&&h(u),v&&h(d),v&&h(_),v&&h(y),v&&h(T),v&&h(O),v&&h(C),v&&h(m),v&&h(g),v&&h(b),v&&h(I),v&&h(w)}}}function Wl(i){let e,l,t,s,n,r,o,a;Gt(i[18]);const c=[Bl,Fl,Gl],f=[];function u(_,y){return _[12]==null&&_[2]==null?0:_[2]==null?1:2}l=u(i),t=f[l]=c[l](i);let d=i[12]!=null&&Ul(i);return{c(){e=L("div"),t.c(),s=R(),d&&d.c(),n=W()},l(_){e=A(_,"DIV",{});var y=M(e);t.l(y),y.forEach(h),s=X(_);const T=Ft("svelte-hn2qma",document.head);d&&d.l(T),n=W(),T.forEach(h)},m(_,y){P(_,e,y),f[l].m(e,null),P(_,s,y),d&&d.m(document.head,null),z(document.head,n),r=!0,o||(a=[H(window,"resize",i[14]),H(window,"click",i[14]),H(window,"resize",i[18])],o=!0)},p(_,[y]){let T=l;l=u(_),l===T?f[l].p(_,y):(ae(),F(f[T],1,1,()=>{f[T]=null}),ue(),t=f[l],t?t.p(_,y):(t=f[l]=c[l](_),t.c()),G(t,1),t.m(e,null)),_[12]!=null&&d.p(_,y)},i(_){r||(G(t),r=!0)},o(_){F(t),r=!1},d(_){_&&h(e),f[l].d(),_&&h(s),d&&d.d(_),h(n),o=!1,De(a)}}}function Rl(i,e,l){let t,s,n,r,o,a;le(i,Ht,q=>l(8,t=q)),le(i,Qe,q=>l(9,s=q)),le(i,Ge,q=>l(16,n=q)),le(i,ze,q=>l(10,o=q)),le(i,Te,q=>l(11,a=q));let{data:c}=e,f,u,d=[...c.posts].find(q=>q.path.includes(t.params.slug)),_,y,T=[],O=[],S,C;const m=ve(!1);le(i,m,q=>l(27,r=q));const g=()=>{te(m,r=!0,r)};Je(async()=>{l(3,y=await pl(d.text)),l(4,T=y.filter($=>!$.set).map($=>{var K;return`${ce}/resources/${(K=$.data)==null?void 0:K["o:id"]}`})),l(2,_=await Ot(y)),te(Qe,s=_,s);const q=localStorage.getItem("selectedLanguage");l(5,O=c.posts.reduce(($,K)=>(!K.path.includes(t.params.slug)&&K.meta.lang==q&&K.links.map(D=>{const E=$.find(j=>j.id===D),V={title:K.meta.title,url:K.path};E?E.essays.some(j=>j.title===V.title&&j.url===V.url)||E.essays.push(V):$.push({id:D,essays:[V]})}),$),[]))});function b(q){Oe.call(this,i,q)}function I(){l(0,f=window.innerWidth)}function w(q){Ie[q?"unshift":"push"](()=>{u=q,l(1,u)})}const N=()=>{g(),te(Te,a=!1,a),l(7,C=u==null?void 0:u.scrollTop)},B=()=>{f<1e3&&(g(),l(7,C=u==null?void 0:u.scrollTop),te(Te,a=!1,a))},v=()=>{f>1e3&&te(Te,a=!0,a)},k=()=>{te(ze,o=S==null?void 0:S.scrollLeft,o)},U=()=>{te(ze,o=S==null?void 0:S.scrollLeft,o),g()},Z=()=>{g()};function se(q){Ie[q?"unshift":"push"](()=>{S=q,l(6,S)})}return i.$$set=q=>{"data"in q&&l(15,c=q.data)},i.$$.update=()=>{i.$$.dirty&65536&&g()},[f,u,_,y,T,O,S,C,t,s,o,a,d,m,g,c,n,b,I,w,N,B,v,k,U,Z,se]}class jl extends Ee{constructor(e){super(),we(this,e,Rl,Wl,Pe,{data:15})}}export{jl as component,Kl as universal};
